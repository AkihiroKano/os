#!/bin/bash
restore_dir="$HOME/restore"
backup_root="$HOME/Backup-"

latest_backup=$(find "$HOME" -maxdepth 1 -type d -name "Backup-*" -printf "%T@ %p\n" | sort -nr | head -1 | cut -d' ' -f2)
if [ -z "$latest_backup" ]; then
    echo "Резервные копии не найдены." >&2
    exit 1
fi

mkdir -p "$restore_dir" || { echo "Ошибка: не удалось создать каталог восстановления." >&2; exit 1; }

# Копирование с обработкой спецсимволов
find "$latest_backup" -type f ! -name "*.*-*-*" -print0 | while IFS= read -r -d '' file; do
    cp "$file" "$restore_dir/$(basename "$file")"
done

echo "Файлы восстановлены в $restore_dir."
